{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-3">나의 일기 목록</h2>
  <ul class="list-group">
    {% for diary in diaries %}
      <li class="list-group-item d-flex justify-content-between align-items-start">
        <div>
          <h5 class="mb-1">{{ diary.date|date:"Y-m-d" }}</h5>
          <p class="mb-1">{{ diary.text }}</p>
          <small class="text-muted">감정: {{ diary.label }} ({{ diary.score }})</small>

          {# 요약 + 공감 출력 블록 추가 #}
          {% if diary.summary or diary.empathy %}
            <hr>
            <h6>작성 결과</h6>
            {% if diary.summary %}
              <p><strong>요약:</strong> {{ diary.summary }}</p>
            {% endif %}
            {% if diary.empathy %}
              <p><strong>공감:</strong> {{ diary.empathy }}</p>
            {% endif %}
          {% endif %}

        </div>
        <div>
          <a href="{% url 'diary_edit' diary.id %}" class="btn btn-sm btn-primary me-1">수정</a>
          <a href="{% url 'diary_delete_confirm' diary.id %}" class="btn btn-sm btn-danger">삭제</a>
        </div>
      </li>
    {% empty %}
      <li class="list-group-item text-center text-muted">
        아직 작성된 일기가 없습니다.
      </li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
